#!/usr/bin/make -f

export DH_GOLANG_GO_GENERATE := 1
export GO111MODULE := on

# TEMPORARY: Enable GOPROXY to download dependencies during build
# TODO: Replace with Debian-packaged Go dependencies for proper packaging
# This is needed because fan2go has 39 Go dependencies not yet packaged for Debian
export GOPROXY := https://proxy.golang.org,direct

%:
	dh $@ --with=golang

# Override dh_auto_build to explicitly run the build target
# dh_auto_build just runs 'make' which doesn't build the binary by default
override_dh_auto_build:
	$(MAKE) build

# Skip dh_auto_test entirely - dh-golang's environment breaks Go modules test resolution  
# Tests are run manually in CI workflow with proper output handling
override_dh_auto_test:
