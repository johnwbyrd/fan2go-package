#!/usr/bin/make -f

export GO111MODULE := on
export GOPROXY := https://proxy.golang.org,direct

%:
	dh $@

# Override dh_auto_build to explicitly run the build target
# dh_auto_build just runs 'make' which doesn't build the binary by default
override_dh_auto_build:
	$(MAKE) build

override_dh_auto_test:
	$(MAKE) test > test-output.log 2>&1 || true
	@echo "===== TEST RESULTS (last 100 lines) ====="
	@tail -n 100 test-output.log
	@echo "===== END TEST RESULTS ====="
