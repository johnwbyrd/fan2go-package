#!/usr/bin/make -f

export DH_GOLANG_GO_GENERATE := 1
export GO111MODULE := on

# TEMPORARY: Enable GOPROXY to download dependencies during build
# TODO: Replace with Debian-packaged Go dependencies for proper packaging
# This is needed because fan2go has 39 Go dependencies not yet packaged for Debian
export GOPROXY := https://proxy.golang.org,direct

%:
	dh $@ --with=golang

# Override dh_auto_test to run only fan2go tests, not dependency tests
# dh_auto_test tries to test all dependencies which can fail in container environment
override_dh_auto_test:
	$(MAKE) test
